<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MindSelf Studio 心理量表</title>
  <meta name="description" content="PHQ-9、GAD-7、PSS-10 在线心理学量表测试，自动评分与建议，仅作科普与自我筛查参考。" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='46' fill='%2310b981'/%3E%3Cpath d='M28 52c8 10 16 15 22 15 10 0 22-13 22-29' fill='none' stroke='white' stroke-width='10' stroke-linecap='round'/%3E%3C/svg%3E" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      .no-print { display: none !important; }
      .print-bg { background: white !important; }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-200">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="h-8 w-8 rounded-full bg-emerald-500"></div>
        <span class="font-semibold text-lg">MindSelf Studio 心理量表</span>
      </div>
      <div class="flex items-center gap-3 no-print">
        <button id="privacyBtn" class="text-sm text-gray-600 hover:text-gray-900">隐私与免责声明</button>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-8 print-bg">
    <section id="view-home" class="space-y-8">
      <div class="space-y-2">
        <h1 class="text-2xl font-bold">选择量表</h1>
        <p class="text-gray-600">以下量表仅用于科普与自我筛查，不能替代专业诊断与治疗。</p>
      </div>
      <div id="cards-container" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
      <div id="history-block" class="space-y-3">
        <h2 class="text-xl font-semibold">历史记录</h2>
        <div id="history-container" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
      </div>
    </section>

    <section id="view-test" class="hidden">
      <div class="flex items-center justify-between mb-4">
        <button id="backHomeFromTest" class="no-print inline-flex items-center px-3 py-2 rounded-md text-sm bg-white border border-gray-300 hover:bg-gray-50">返回首页</button>
      </div>
      <div class="space-y-6">
        <div>
          <h2 id="test-title" class="text-2xl font-bold"></h2>
          <p id="test-desc" class="text-gray-600 mt-1"></p>
        </div>
        <div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div id="progress-bar" class="h-2 bg-emerald-500 rounded-full" style="width:0%"></div>
          </div>
          <div id="progress-text" class="text-sm text-gray-600 mt-1"></div>
        </div>
        <form id="questions-form" class="space-y-6"></form>
        <div class="flex items-center gap-3 no-print">
          <button id="submit-btn" class="inline-flex items-center px-4 py-2 rounded-md text-white bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50" disabled>提交并查看结果</button>
          <button id="reset-btn" type="button" class="inline-flex items-center px-3 py-2 rounded-md bg-white border border-gray-300 hover:bg-gray-50">清空选择</button>
        </div>
      </div>
    </section>

    <section id="view-result" class="hidden">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <button id="backHomeFromResult" class="no-print inline-flex items-center px-3 py-2 rounded-md text-sm bg-white border border-gray-300 hover:bg-gray-50">返回首页</button>
          <button id="retakeBtn" class="no-print inline-flex items-center px-3 py-2 rounded-md text-sm bg-white border border-gray-300 hover:bg-gray-50">重新作答</button>
        </div>
        <button id="printBtn" class="no-print inline-flex items-center px-3 py-2 rounded-md text-sm bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100">打印/保存 PDF</button>
      </div>
      <div class="bg-white rounded-xl border border-gray-200 p-6 space-y-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div>
            <h2 id="result-title" class="text-2xl font-bold"></h2>
            <p class="text-gray-600 mt-1">结果仅供参考，如有困扰请尽快寻求专业帮助。</p>
          </div>
          <div class="text-right">
            <div id="result-score" class="text-3xl font-bold"></div>
            <div id="result-severity" class="mt-1 inline-block px-2 py-1 rounded text-sm"></div>
          </div>
        </div>
        <div id="safety-note" class="hidden rounded-lg border border-red-200 bg-red-50 text-red-800 p-4"></div>
        <div>
          <h3 class="font-semibold mb-2">建议</h3>
          <div id="result-advice" class="prose prose-sm max-w-none"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">参考文献</h3>
          <ul id="result-citations" class="list-disc pl-5 space-y-1"></ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2">作答明细</h3>
          <div id="result-detail" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="border-t border-gray-200 bg-white">
    <div class="max-w-5xl mx-auto px-4 py-6 text-sm text-gray-600">
      本网站不收集可识别个人信息，作答数据仅存储在您的浏览器设备中。结果不构成医疗建议，如有明显不适，请联系专业医生或心理咨询师。
    </div>
  </footer>

  <div id="privacyModal" class="fixed inset-0 hidden items-center justify-center bg-black/40 z-50">
    <div class="bg-white max-w-lg w-full mx-4 rounded-xl p-6 space-y-4">
      <h3 class="text-lg font-semibold">隐私与免责声明</h3>
      <div class="text-sm text-gray-700 space-y-2">
        <p>本工具为科普性质的自我筛查工具，不会上传您的答案，仅使用浏览器本地存储保存历史记录。结果不能替代专业诊断与治疗。</p>
        <p>如出现自伤或伤人想法，或情绪明显影响到生活与工作，请尽快寻求专业帮助或联系当地应急援助。</p>
      </div>
      <div class="text-right">
        <button id="privacyClose" class="inline-flex items-center px-4 py-2 rounded-md bg-emerald-600 text-white hover:bg-emerald-700">我已知悉</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
